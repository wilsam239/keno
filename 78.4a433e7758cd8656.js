"use strict";(self.webpackChunkkeno=self.webpackChunkkeno||[]).push([[78],{1078:(z,v,a)=>{a.r(v),a.d(v,{GameModule:()=>B});var y=a(4100),Z=a(3593),b=a(1135),m=a(9300),c=a(8505),O=a(5577),N=a(4986),A=a(5963);function T(i=0,s=N.z){return i<0&&(i=0),(0,A.H)(i,i,s)}var C=a(2722),w=a(2529),E=a(3900),S=a(7579),G=a(4482),L=a(5403);var U=a(5191),P=a(727),r=a(4286),t=a(5e3),_=a(1555),g=a(7093),k=a(8099),h=a(9808),I=a(3322);function q(i,s){if(1&i&&(t.ynx(0),t.TgZ(1,"div",24)(2,"div",17)(3,"div"),t._uU(4,"NEXT GAME IN"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.qZA()(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(6),t.hij("0:",e.secondsTilNext,"")}}function D(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.showSummary=!0,o.gs.dialogOpened=!0}),t.TgZ(1,"div",17)(2,"div"),t._uU(3,"RESULT"),t.qZA()(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"currency"),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.payout))}}function F(i,s){if(1&i&&(t.ynx(0),t.YNc(1,q,7,1,"ng-container",18),t.YNc(2,D,7,3,"ng-template",null,23,t.W1O),t.BQk()),2&i){const e=t.MAs(3),n=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",n.gameNumber<(null!==(o=null==n.config?null:n.config.games)&&void 0!==o?o:0))("ngIfElse",e)}}const H=function(i){return{clicked:i}};function R(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeDrawTime()}),t.TgZ(1,"div",17)(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-icon",27),t._uU(5,"fast_forward"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(e.fast?"SLOWER":"FASTER"),t.xp6(1),t.Q6J("ngClass",t.VKq(2,H,e.fast))}}const J=function(i){return{tails:i}};function Q(i,s){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.Q6J("id","tile-"+e)("ngClass",t.VKq(3,J,e>40&&e<=50)),t.xp6(1),t.hij(" ",e," ")}}function V(i,s){if(1&i&&(t.TgZ(0,"section",29)(1,"h1"),t._uU(2,"Games Summary"),t.qZA(),t.TgZ(3,"div",30)(4,"div",31)(5,"div",17)(6,"div"),t._uU(7,"GAMES PLAYED"),t.qZA()(),t.TgZ(8,"div"),t._uU(9),t.qZA()(),t.TgZ(10,"div",32)(11,"div",17)(12,"div"),t._uU(13,"PAYOUT"),t.qZA()(),t.TgZ(14,"div"),t._uU(15),t.ALo(16,"currency"),t.qZA()(),t.TgZ(17,"div",31)(18,"div",17)(19,"div"),t._uU(20,"SPENT"),t.qZA()(),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"currency"),t.qZA()(),t.TgZ(24,"div",33)(25,"div",17)(26,"div"),t._uU(27,"HEAD COUNT"),t.qZA()(),t.TgZ(28,"div"),t._uU(29),t.qZA()(),t.TgZ(30,"div",34)(31,"div",17)(32,"div"),t._uU(33,"TAIL COUNT"),t.qZA()(),t.TgZ(34,"div"),t._uU(35),t.qZA()(),t.TgZ(36,"div",35)(37,"div",17)(38,"div"),t._uU(39,"EVEN COUNT"),t.qZA()(),t.TgZ(40,"div"),t._uU(41),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(9),t.Oqu(e.config.games),t.xp6(6),t.Oqu(t.lcZ(16,6,e.payout)),t.xp6(7),t.Oqu(t.lcZ(23,8,e.config.games*e.config.bet)),t.xp6(7),t.Oqu(e.totalHeadCount),t.xp6(6),t.Oqu(e.totalTailCount),t.xp6(6),t.Oqu(e.totalEvenCount)}}const Y=function(i){return["../",i]},j=[{path:"",component:(()=>{class i{constructor(e){this.gs=e,this.AppRoutes=r.$w,this._subs=[],this.gameNumber=0,this.tiles=r.u8,this.fast=!0,this.drawTime=new b.X(this.fast?500:1e3),this._results=[],this.drawn=[],this.allNumbersDrawn=new b.X(!1),this.gameFinished=!1,this.headCount=0,this.tailCount=0,this.payout=0,this.history=[],this.totalHeadCount=0,this.totalTailCount=0,this.totalEvenCount=0}getTimeInString(e){return e.toLocaleString(void 0,{minimumIntegerDigits:2})}ngOnInit(){this.sub(this.gs.setup.pipe((0,m.h)(e=>!!e),(0,c.b)(e=>{this.config=e,this.retry()})))}initVisualSubs(){this.sub(this.gs.dialogClosed.pipe((0,c.b)(()=>this.showSummary=!1)),this.gameCompletion(),this.drawNumbers())}gameCompletion(){return this.allNumbersDrawn.pipe((0,m.h)(e=>e),(0,c.b)(()=>{this.gameFinished=!0,this.gs.dialogOpened=this.gameNumber==this.config.games,this.showSummary=this.gs.dialogOpened}),(0,O.z)(()=>T(1e3).pipe((0,C.R)((0,A.H)(r.fX).pipe((0,w.o)(()=>this.gameNumber<this.config.games),(0,c.b)(()=>{this.draw(),this.allNumbersDrawn.next(!1)}))),(0,c.b)(e=>{this.secondsTilNext=this.getTimeInString((r.fX-1e3-1e3*e)/1e3)}))))}drawNumbers(){return this.drawTime.pipe((0,c.b)(e=>console.log("Should change interval to "+e)),(0,E.w)(e=>T(e).pipe((0,C.R)(this.allNumbersDrawn.pipe((0,m.h)(n=>n))),function M(i){return(0,G.e)((s,e)=>{let n,l,o=!1,d=!1,u=!1;const f=()=>u&&d&&(e.complete(),!0),x=()=>{u=!1,n=s.subscribe((0,L.x)(e,void 0,()=>{u=!0,!f()&&(l||(l=new S.x,i(l).subscribe((0,L.x)(e,()=>{n?x():o=!0},()=>{d=!0,f()}))),l).next()})),o&&(n.unsubscribe(),n=null,o=!1,x())};x()})}(()=>this.allNumbersDrawn.pipe((0,m.h)(n=>!1===n))))),(0,c.b)(e=>{const n=this._results.at(this.drawn.length);if(n){const o=document.getElementById("tile-"+n);o&&o.classList.add("selected-"+Math.ceil(n/10),"selected"),n<=40?this.headCount+=1:this.tailCount+=1,this.drawn.push(n)}else this.allNumbersDrawn.next(!0)}))}retry(){if(this.totalEvenCount=0,this.totalHeadCount=0,this.totalTailCount=0,this.payout=0,this.gameNumber=0,this._subs.forEach(e=>e.unsubscribe()),this.config.skipVisuals){do{this.draw()}while(this.gameNumber<this.config.games);const e=this.config.games*this.config.bet,n=this.history.sort((o,l)=>l.payout-o.payout);console.log("SKIPPED VISUALS"),console.log("SPENT: "+e),console.log("PAID: "+this.payout),console.log("OUTCOME: $"+(this.payout-e)),console.log("BEST GAME:"),console.log(n[0]),console.log("SORTED GAMES: "),console.log(n.filter(o=>o.payout>0))}else this.initVisualSubs(),this.draw()}draw(){if(this.gameNumber>=this.config.games)return;this.gameNumber+=1,this.secondsTilNext=this.getTimeInString(r.fX/1e3),this.gameFinished=!1;const e=document.getElementsByClassName("selected");Array.from(e).forEach(n=>{const o=[];n.classList.forEach(l=>{l.includes("selected")&&o.push(l)}),n.classList.remove(...o)}),this.headCount=0,this.tailCount=0,this.drawn=[],this._results=(0,r.sZ)(this.tiles,r._y),this.calcResults()}calcResults(){var e,n;if(this.config.numbers){const o=this._results.reduce((f,p)=>f+(this.config.choices.includes(p)?1:0),0),l=this.horton();switch(l){case"EVENS":this.totalEvenCount+=1;break;case"HEADS":this.totalHeadCount+=1;break;case"TAILS":this.totalTailCount+=1;break;default:return}const d=(null!==(e=r.LG[this.config.numbers][o.toString()])&&void 0!==e?e:0)*(null!==(n=this.config.bet)&&void 0!==n?n:1),u={gameNo:this.gameNumber,payout:d,matches:o,hort:l,draw:this._results};console.log(`----- Game ${this.gameNumber} Result -----`),console.log(u),this.history.push(u),this.payout+=d}}horton(){const n=this._results.filter(o=>o>40);return n.length>10?"TAILS":10===n.length?"EVENS":"HEADS"}changeDrawTime(){this.fast=!this.fast,this.drawTime.next(this.fast?100:1e3)}ngOnDestroy(){this._subs.forEach(e=>e.unsubscribe())}sub(...e){e.forEach(n=>{(0,U.b)(n)?this._subs.push(n.subscribe()):(0,P.Nn)(e)&&this._subs.push(n)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.h))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-game"]],decls:38,vars:10,consts:[["fxLayout","column","id","game-container"],["fxLayout","row","fxFill","","fxLayoutAlign","space-between","fxLayout","",1,"result-header"],["fxLayoutAlign","center center","fxLayoutGap","4px",1,"left-result-header"],["id","back-container","fxLayout","column","fxLayoutAlign"," center",1,"clickable",3,"routerLink"],["id","back-title"],["fxLayoutAlign","center center",1,"tile","back-tile"],["id","run-container","fxLayout","column","fxLayoutAlign"," center",1,"clickable",3,"click"],["id","run-title"],["fxLayoutAlign","center center",1,"tile","run-tile"],["fxLayoutAlign","center center","fxLayoutGap","4px",1,"right-result-header"],["id","heads-container","fxLayout","column","fxLayoutAlign"," center"],["id","heads-title"],["id","heads-count","fxLayoutAlign","center center",1,"tile","heads-tile"],["id","tails-container","fxLayout","column","fxLayoutAlign"," center"],["id","tails-title"],["id","tails-count","fxLayoutAlign","center center",1,"tile","tails-tile"],["id","game-id","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],[1,"big-tile-header"],[4,"ngIf","ngIfElse"],["faster",""],["fxFlex","","fxLayoutGap","4px","fxLayout","row wrap","fxLayoutAlign","center",1,"board"],["class","tile","fxLayoutAlign","center center",3,"id","ngClass",4,"ngFor","ngForOf"],["id","game-summary",4,"ngIf"],["allFinished",""],["id","time-until-next","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","all-games-finished","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile","clickable",3,"click"],["id","fast-forward","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile","clickable",3,"click"],[3,"ngClass"],["fxLayoutAlign","center center",1,"tile",3,"id","ngClass"],["id","game-summary"],["fxLayout","column"],["id","games-played","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","payout","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","head-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","tail-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","even-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"div",4),t._uU(5,"Setup"),t.qZA(),t.TgZ(6,"div",5)(7,"mat-icon"),t._uU(8,"arrow_back_ios"),t.qZA()()(),t.TgZ(9,"div",6),t.NdJ("click",function(){return n.retry()}),t.TgZ(10,"div",7),t._uU(11,"Again"),t.qZA(),t.TgZ(12,"div",8)(13,"mat-icon"),t._uU(14,"refresh"),t.qZA()()()(),t.TgZ(15,"div",9)(16,"div",10)(17,"div",11),t._uU(18,"Heads"),t.qZA(),t.TgZ(19,"div",12),t._uU(20),t.qZA()(),t.TgZ(21,"div",13)(22,"div",14),t._uU(23,"Tails"),t.qZA(),t.TgZ(24,"div",15),t._uU(25),t.qZA()(),t.TgZ(26,"div",16)(27,"div",17)(28,"div"),t._uU(29,"GAME"),t.qZA()(),t.TgZ(30,"div"),t._uU(31),t.qZA()(),t.YNc(32,F,4,2,"ng-container",18),t.YNc(33,R,6,4,"ng-template",null,19,t.W1O),t.qZA()(),t.TgZ(35,"div",20),t.YNc(36,Q,2,5,"div",21),t.qZA()(),t.YNc(37,V,42,10,"section",22)),2&e){const o=t.MAs(34);t.xp6(3),t.Q6J("routerLink",t.VKq(8,Y,n.AppRoutes.SETUP)),t.xp6(17),t.hij(" ",n.headCount," "),t.xp6(5),t.hij(" ",n.tailCount," "),t.xp6(6),t.Oqu(n.gameNumber),t.xp6(1),t.Q6J("ngIf",n.gameFinished)("ngIfElse",o),t.xp6(4),t.Q6J("ngForOf",n.tiles),t.xp6(1),t.Q6J("ngIf",n.gameNumber==n.config.games&&n.gameFinished&&n.showSummary)}},directives:[g.xw,g.s9,g.Wh,g.SQ,y.yS,k.Hw,h.O5,h.mk,I.oO,g.yH,h.sg],pipes:[h.H9],styles:["#game-container[_ngcontent-%COMP%]{padding:0 1em}.result-header[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], .result-header[_ngcontent-%COMP%]   .big-tile[_ngcontent-%COMP%]{color:#fff!important}.tile[_ngcontent-%COMP%]{width:9vw;text-align:center;height:7vh;border-radius:.25em;margin:2px 0;background:#d8e4eb;font-size:2em;color:#0000}.selected[_ngcontent-%COMP%]{color:#fff}.tails[_ngcontent-%COMP%]{margin-top:1em}.big-tile[_ngcontent-%COMP%]{width:18vw;text-align:center;height:10vh;border-radius:.25em;margin:2px 0;background:#d8e4eb;font-size:2em;background-color:var(--big-tile)}.heads-tile[_ngcontent-%COMP%]{background-color:var(--heads)}.tails-tile[_ngcontent-%COMP%]{background-color:var(--tails)}#heads-title[_ngcontent-%COMP%]{color:var(--heads)}#tails-title[_ngcontent-%COMP%]{color:var(--tails)}.back-tile[_ngcontent-%COMP%]{background-color:var(--row5)}#back-title[_ngcontent-%COMP%]{color:var(--row5)}.run-tile[_ngcontent-%COMP%]{background-color:var(--row6)}#run-title[_ngcontent-%COMP%]{color:var(--row6)}.big-tile-header[_ngcontent-%COMP%]{font-size:20px}.clickable[_ngcontent-%COMP%]:hover{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}#game-summary[_ngcontent-%COMP%]{left:0;right:0;top:0;bottom:0;width:50vw;height:80vh;background:#d8e4eb;border-radius:1em;z-index:1000;position:absolute;margin:auto;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}"]}),i})()}];let B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.m,y.Bz.forChild(j)]]}),i})()}}]);