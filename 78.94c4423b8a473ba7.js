"use strict";(self.webpackChunkkeno=self.webpackChunkkeno||[]).push([[78],{1078:(nt,v,a)=>{a.r(v),a.d(v,{GameModule:()=>et});var y=a(4100),L=a(3593),b=a(1135),h=a(9300),r=a(8505),_=a(5577),O=a(4986),T=a(5963);function C(n=0,s=O.z){return n<0&&(n=0),(0,T.H)(n,n,s)}var A=a(2722),w=a(2529),N=a(3900),G=a(7579),M=a(4482),Z=a(5403);var E=a(5191),U=a(727),c=a(4286),t=a(5e3),P=a(1555),m=a(7093),k=a(8099),u=a(9808),q=a(3322);function I(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"div",27)(2,"div",18)(3,"div"),t._uU(4,"NEXT GAME IN"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(6),t.hij("0:",e.secondsTilNext,"")}}function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.showSummary=!0,o.gs.dialogOpened=!0}),t.TgZ(1,"div",18)(2,"div"),t._uU(3,"RESULT"),t.qZA()(),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"currency"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.payout))}}function D(n,s){if(1&n&&(t.ynx(0),t.YNc(1,I,7,1,"ng-container",19),t.YNc(2,F,7,3,"ng-template",null,26,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",i.gameNumber<(null!==(o=null==i.config?null:i.config.games)&&void 0!==o?o:0))("ngIfElse",e)}}const H=function(n){return{clicked:n}};function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeDrawTime()}),t.TgZ(1,"div",18)(2,"div"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-icon",30),t._uU(5,"fast_forward"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.fast?"SLOWER":"FASTER"),t.xp6(1),t.Q6J("ngClass",t.VKq(2,H,e.fast))}}function R(n,s){1&n&&t.GkF(0)}function Y(n,s){1&n&&t.GkF(0)}function Q(n,s){1&n&&t.GkF(0)}const V=function(n){return{tiles:n}};function W(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32)(2,"span",33),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"div",34),t.YNc(6,Q,1,0,"ng-container",22),t.qZA()()),2&n){const e=s.className,i=s.tileList;t.oxw();const o=t.MAs(44);t.xp6(1),t.Gre("",e,"-tile"),t.MGl("id","",e,"-board-label"),t.xp6(2),t.Oqu(t.lcZ(4,9,e)),t.xp6(2),t.Tol(e+"-tiles"),t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(11,V,i))}}function j(n,s){if(1&n&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("id","tile-"+e),t.xp6(1),t.hij(" ",e," ")}}function z(n,s){1&n&&t.YNc(0,j,2,2,"div",35),2&n&&t.Q6J("ngForOf",s.tiles)}function B(n,s){if(1&n&&(t.TgZ(0,"section",37)(1,"h1"),t._uU(2,"Games Summary"),t.qZA(),t.TgZ(3,"div",38)(4,"div",39)(5,"div",18)(6,"div"),t._uU(7,"GAMES PLAYED"),t.qZA()(),t.TgZ(8,"div"),t._uU(9),t.qZA()(),t.TgZ(10,"div",40)(11,"div",18)(12,"div"),t._uU(13,"PAYOUT"),t.qZA()(),t.TgZ(14,"div"),t._uU(15),t.ALo(16,"currency"),t.qZA()(),t.TgZ(17,"div",39)(18,"div",18)(19,"div"),t._uU(20,"SPENT"),t.qZA()(),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"currency"),t.qZA()(),t.TgZ(24,"div",41)(25,"div",18)(26,"div"),t._uU(27,"HEAD COUNT"),t.qZA()(),t.TgZ(28,"div"),t._uU(29),t.qZA()(),t.TgZ(30,"div",42)(31,"div",18)(32,"div"),t._uU(33,"TAIL COUNT"),t.qZA()(),t.TgZ(34,"div"),t._uU(35),t.qZA()(),t.TgZ(36,"div",43)(37,"div",18)(38,"div"),t._uU(39,"EVEN COUNT"),t.qZA()(),t.TgZ(40,"div"),t._uU(41),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(9),t.Oqu(e.config.games),t.xp6(6),t.Oqu(t.lcZ(16,6,e.payout)),t.xp6(7),t.Oqu(t.lcZ(23,8,e.config.games*e.config.bet)),t.xp6(7),t.Oqu(e.totalHeadCount),t.xp6(6),t.Oqu(e.totalTailCount),t.xp6(6),t.Oqu(e.totalEvenCount)}}const X=function(n){return["../",n]},K=function(n){return{className:"heads",tileList:n}},$=function(n){return{className:"tails",tileList:n}},tt=[{path:"",component:(()=>{class n{constructor(e){this.gs=e,this.AppRoutes=c.$w,this._subs=[],this.gameNumber=0,this.headTiles=c.u8.slice(0,40),this.tailTiles=c.u8.slice(40,80),this.fast=!0,this.drawTime=new b.X(this.fast?500:1e3),this._results=[],this.drawn=[],this.allNumbersDrawn=new b.X(!1),this.gameFinished=!1,this.headCount=0,this.tailCount=0,this.payout=0,this.history=[],this.totalHeadCount=0,this.totalTailCount=0,this.totalEvenCount=0}getTimeInString(e){return e.toLocaleString(void 0,{minimumIntegerDigits:2})}ngOnInit(){this.sub(this.gs.setup.pipe((0,h.h)(e=>!!e),(0,r.b)(e=>{this.config=e,this.retry()})))}initVisualSubs(){this.sub(this.gs.dialogClosed.pipe((0,r.b)(()=>this.showSummary=!1)),this.gameCompletion(),this.drawNumbers())}gameCompletion(){return this.allNumbersDrawn.pipe((0,h.h)(e=>e),(0,r.b)(()=>{this.gameFinished=!0,this.gs.dialogOpened=this.gameNumber==this.config.games,this.showSummary=this.gs.dialogOpened}),(0,_.z)(()=>C(1e3).pipe((0,A.R)((0,T.H)(c.fX).pipe((0,w.o)(()=>this.gameNumber<this.config.games),(0,r.b)(()=>{this.draw(),this.allNumbersDrawn.next(!1)}))),(0,r.b)(e=>{this.secondsTilNext=this.getTimeInString((c.fX-1e3-1e3*e)/1e3)}))))}drawNumbers(){return this.drawTime.pipe((0,r.b)(e=>console.log("Should change interval to "+e)),(0,N.w)(e=>C(e).pipe((0,A.R)(this.allNumbersDrawn.pipe((0,h.h)(i=>i))),function S(n){return(0,M.e)((s,e)=>{let i,l,o=!1,d=!1,g=!1;const f=()=>g&&d&&(e.complete(),!0),x=()=>{g=!1,i=s.subscribe((0,Z.x)(e,void 0,()=>{g=!0,!f()&&(l||(l=new G.x,n(l).subscribe((0,Z.x)(e,()=>{i?x():o=!0},()=>{d=!0,f()}))),l).next()})),o&&(i.unsubscribe(),i=null,o=!1,x())};x()})}(()=>this.allNumbersDrawn.pipe((0,h.h)(i=>!1===i))))),(0,r.b)(e=>{const i=this._results.at(this.drawn.length);if(i){const o=document.getElementById("tile-"+i);o&&o.classList.add("selected-"+Math.ceil(i/10),"selected"),i<=40?this.headCount+=1:this.tailCount+=1,this.drawn.push(i)}else this.allNumbersDrawn.next(!0)}))}retry(){if(this.totalEvenCount=0,this.totalHeadCount=0,this.totalTailCount=0,this.payout=0,this.gameNumber=0,this._subs.forEach(e=>e.unsubscribe()),this.config.skipVisuals){do{this.draw()}while(this.gameNumber<this.config.games);const e=this.config.games*this.config.bet,i=this.history.sort((o,l)=>l.payout-o.payout);console.log("SKIPPED VISUALS"),console.log("SPENT: "+e),console.log("PAID: "+this.payout),console.log("OUTCOME: $"+(this.payout-e)),console.log("BEST GAME:"),console.log(i[0]),console.log("SORTED GAMES: "),console.log(i.filter(o=>o.payout>0))}else this.initVisualSubs(),this.draw()}draw(){if(this.gameNumber>=this.config.games)return;this.gameNumber+=1,this.secondsTilNext=this.getTimeInString(c.fX/1e3),this.gameFinished=!1;const e=document.getElementsByClassName("selected");Array.from(e).forEach(i=>{const o=[];i.classList.forEach(l=>{l.includes("selected")&&o.push(l)}),i.classList.remove(...o)}),this.headCount=0,this.tailCount=0,this.drawn=[],this._results=(0,c.sZ)(c.u8,c._y),this.calcResults()}calcResults(){var e,i;if(this.config.numbers){const o=this._results.reduce((f,p)=>f+(this.config.choices.includes(p)?1:0),0),l=this.horton();switch(l){case"EVENS":this.totalEvenCount+=1;break;case"HEADS":this.totalHeadCount+=1;break;case"TAILS":this.totalTailCount+=1;break;default:return}const d=(null!==(e=c.LG[this.config.numbers][o.toString()])&&void 0!==e?e:0)*(null!==(i=this.config.bet)&&void 0!==i?i:1),g={gameNo:this.gameNumber,payout:d,matches:o,hort:l,draw:this._results};console.log(`----- Game ${this.gameNumber} Result -----`),console.log(g),this.history.push(g),this.payout+=d}}horton(){const i=this._results.filter(o=>o>40);return i.length>10?"TAILS":10===i.length?"EVENS":"HEADS"}changeDrawTime(){this.fast=!this.fast,this.drawTime.next(this.fast?100:1e3)}ngOnDestroy(){this._subs.forEach(e=>e.unsubscribe())}sub(...e){e.forEach(i=>{(0,E.b)(i)?this._subs.push(i.subscribe()):(0,U.Nn)(e)&&this._subs.push(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game"]],decls:46,vars:17,consts:[["fxLayout","column","id","game-container"],["fxLayout","row","fxLayoutGap","12px",1,"header"],[1,"spacer-label"],["fxLayout","row","fxFill","","fxLayoutGap","4px",1,"result-header"],["id","back-container","fxLayout","column","fxLayoutAlign"," center",1,"clickable",3,"routerLink"],["id","back-title"],["fxLayoutAlign","center center",1,"tile","back-tile"],["id","run-container","fxLayout","column","fxLayoutAlign"," center",1,"clickable",3,"click"],["id","run-title"],["fxLayoutAlign","center center",1,"tile","run-tile"],[1,"spacer-tile","tile"],["id","heads-container","fxLayout","column","fxLayoutAlign"," center"],["id","heads-title"],["id","heads-count","fxLayoutAlign","center center",1,"tile","heads-tile"],["id","tails-container","fxLayout","column","fxLayoutAlign"," center"],["id","tails-title"],["id","tails-count","fxLayoutAlign","center center",1,"tile","tails-tile"],["id","game-id","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","1vw",1,"big-tile"],[1,"big-tile-header"],[4,"ngIf","ngIfElse"],["faster",""],["fxLayout","column","fxLayoutGap","12px",1,"board"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["boardSection",""],["tileTemplate",""],["id","game-summary",4,"ngIf"],["allFinished",""],["id","time-until-next","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","1vw",1,"big-tile"],["id","all-games-finished","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","1vw",1,"big-tile","clickable",3,"click"],["id","fast-forward","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","1vw",1,"big-tile","clickable",3,"click"],[3,"ngClass"],["fxLayout","row","fxLayoutGap","12px"],["fxLayout","row","fxLayoutAlign","center center",3,"id"],[1,"board-label"],["fxFlex","","fxLayoutGap","4px","fxLayout","row wrap"],["class","tile","fxLayoutAlign","center center",3,"id",4,"ngFor","ngForOf"],["fxLayoutAlign","center center",1,"tile",3,"id"],["id","game-summary"],["fxLayout","column"],["id","games-played","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","payout","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","head-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","tail-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","even-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"]],template:function(e,i){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._uU(3,"spacer"),t.qZA(),t.TgZ(4,"div",3)(5,"a",4)(6,"div",5),t._uU(7,"Setup"),t.qZA(),t.TgZ(8,"div",6)(9,"mat-icon"),t._uU(10,"arrow_back_ios"),t.qZA()()(),t.TgZ(11,"div",7),t.NdJ("click",function(){return i.retry()}),t.TgZ(12,"div",8),t._uU(13,"Again"),t.qZA(),t.TgZ(14,"div",9)(15,"mat-icon"),t._uU(16,"refresh"),t.qZA()()(),t._UZ(17,"div",10)(18,"div",10),t.TgZ(19,"div",11)(20,"div",12),t._uU(21,"Heads"),t.qZA(),t.TgZ(22,"div",13),t._uU(23),t.qZA()(),t.TgZ(24,"div",14)(25,"div",15),t._uU(26,"Tails"),t.qZA(),t.TgZ(27,"div",16),t._uU(28),t.qZA()(),t.TgZ(29,"div",17)(30,"div",18)(31,"div"),t._uU(32,"GAME"),t.qZA()(),t.TgZ(33,"div"),t._uU(34),t.qZA()(),t.YNc(35,D,4,2,"ng-container",19),t.YNc(36,J,6,4,"ng-template",null,20,t.W1O),t.qZA()(),t.TgZ(38,"div",21),t.YNc(39,R,1,0,"ng-container",22),t.YNc(40,Y,1,0,"ng-container",22),t.qZA()(),t.YNc(41,W,7,13,"ng-template",null,23,t.W1O),t.YNc(43,z,1,1,"ng-template",null,24,t.W1O),t.YNc(45,B,42,10,"section",25)),2&e){const o=t.MAs(37),l=t.MAs(42);t.xp6(5),t.Q6J("routerLink",t.VKq(11,X,i.AppRoutes.SETUP)),t.xp6(18),t.hij(" ",i.headCount," "),t.xp6(5),t.hij(" ",i.tailCount," "),t.xp6(6),t.Oqu(i.gameNumber),t.xp6(1),t.Q6J("ngIf",i.gameFinished)("ngIfElse",o),t.xp6(4),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(13,K,i.headTiles)),t.xp6(1),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(15,$,i.tailTiles)),t.xp6(5),t.Q6J("ngIf",i.gameNumber==i.config.games&&i.gameFinished&&i.showSummary)}},directives:[m.xw,m.SQ,m.s9,y.yS,m.Wh,k.Hw,u.O5,u.mk,q.oO,u.tP,m.yH,u.sg],pipes:[u.H9,u.rS],styles:["[_ngcontent-%COMP%]:root{--tile-width: 8.5vw;--tile-gap: 4px;--tile-height: 5vw}#game-container[_ngcontent-%COMP%]{padding:0 1em}.result-header[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], .result-header[_ngcontent-%COMP%]   .big-tile[_ngcontent-%COMP%]{color:#fff!important}.tile[_ngcontent-%COMP%]{width:8.5vw;text-align:center;height:5vw;border-radius:.25em;margin:2px 0;background:#d8e4eb;font-size:3vw;color:#0000}.selected[_ngcontent-%COMP%]{color:#fff}.tails[_ngcontent-%COMP%]{margin-top:1em}.big-tile[_ngcontent-%COMP%]{width:calc(17vw + 4px);text-align:center;height:10vw;border-radius:.25em;margin:2px 0;background:#d8e4eb;font-size:2em;background-color:var(--big-tile)}.heads-tile[_ngcontent-%COMP%]{background-color:var(--heads)}.tails-tile[_ngcontent-%COMP%]{background-color:var(--tails)}#heads-title[_ngcontent-%COMP%]{color:var(--heads)}#tails-title[_ngcontent-%COMP%]{color:var(--tails)}.back-tile[_ngcontent-%COMP%]{background-color:var(--row5)}#back-title[_ngcontent-%COMP%]{color:var(--row5)}.run-tile[_ngcontent-%COMP%]{background-color:var(--row6)}#run-title[_ngcontent-%COMP%]{color:var(--row6)}.big-tile-header[_ngcontent-%COMP%]{font-size:2vw}.clickable[_ngcontent-%COMP%]:hover{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}#game-summary[_ngcontent-%COMP%]{left:0;right:0;top:0;bottom:0;width:50vw;height:80vh;background:#d8e4eb;border-radius:1em;z-index:1000;position:absolute;margin:auto;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}#heads-board-label[_ngcontent-%COMP%], #tails-board-label[_ngcontent-%COMP%], .spacer-label[_ngcontent-%COMP%]{height:calc(20vw + 12px);border-radius:.25em;width:3vw;color:#fff}.spacer-label[_ngcontent-%COMP%]{height:100%}.board-label[_ngcontent-%COMP%]{transform:rotate(-90deg);font-size:2vw}.spacer-tile[_ngcontent-%COMP%]{visibility:hidden}"]}),n})()}];let et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[L.m,y.Bz.forChild(tt)]]}),n})()}}]);