"use strict";(self.webpackChunkkeno=self.webpackChunkkeno||[]).push([[78],{1078:(tt,x,s)=>{s.r(x),s.d(x,{GameModule:()=>$});var T=s(4100),_=s(8324),b=s(1135),d=s(9300),c=s(8505),N=s(5577),w=s(4986),C=s(5963);function Z(n=0,a=w.z){return n<0&&(n=0),(0,C.H)(n,n,a)}var y=s(2722),M=s(2529),U=s(3900),S=s(7579),E=s(4482),A=s(5403);var L=s(5191),P=s(727),r=s(4286),t=s(5e3),q=s(1555),O=s(3954),u=s(9808),I=s(8099),D=s(3322),p=s(7093);function F(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-grid-tile",9)(2,"div",25)(3,"div",11)(4,"div"),t._uU(5,"NEXT GAME IN"),t.qZA()(),t.TgZ(6,"div"),t._uU(7),t.qZA()()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(7),t.hij("0:",e.secondsTilNext,"")}}function H(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-grid-tile",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.showSummary=!0,o.gs.dialogOpened=!0}),t.TgZ(1,"div",27)(2,"div",11)(3,"div"),t._uU(4,"RESULT"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"currency"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,1,e.payout))}}function k(n,a){if(1&n&&(t.ynx(0),t.YNc(1,F,8,1,"ng-container",12),t.YNc(2,H,8,3,"ng-template",null,24,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",i.gameNumber<(null!==(o=null==i.config?null:i.config.games)&&void 0!==o?o:0))("ngIfElse",e)}}const R=function(n){return{clicked:n}};function J(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-grid-tile",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeDrawTime()}),t.TgZ(1,"div",28)(2,"div",11)(3,"div"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-icon",29),t._uU(6,"fast_forward"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.fast?"SLOWER":"FASTER"),t.xp6(1),t.Q6J("ngClass",t.VKq(2,R,e.fast))}}function Q(n,a){1&n&&t.GkF(0)}function Y(n,a){1&n&&t.GkF(0)}function V(n,a){if(1&n&&(t.TgZ(0,"mat-grid-tile",32),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("id","tile-"+e),t.xp6(1),t.hij(" ",e," ")}}function z(n,a){if(1&n&&(t.TgZ(0,"mat-grid-list",2)(1,"mat-grid-tile",30)(2,"span"),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.YNc(5,V,2,2,"mat-grid-tile",31),t.qZA()),2&n){const e=a.tiles,i=a.name;t.xp6(1),t.Gre("",i,"-tile board-label"),t.xp6(2),t.Oqu(t.lcZ(4,5,i)),t.xp6(2),t.Q6J("ngForOf",e)}}function B(n,a){if(1&n&&(t.TgZ(0,"section",33)(1,"h1"),t._uU(2,"Games Summary"),t.qZA(),t.TgZ(3,"div",34)(4,"div",35)(5,"div",11)(6,"div"),t._uU(7,"GAMES PLAYED"),t.qZA()(),t.TgZ(8,"div"),t._uU(9),t.qZA()(),t.TgZ(10,"div",36)(11,"div",11)(12,"div"),t._uU(13,"PAYOUT"),t.qZA()(),t.TgZ(14,"div"),t._uU(15),t.ALo(16,"currency"),t.qZA()(),t.TgZ(17,"div",35)(18,"div",11)(19,"div"),t._uU(20,"SPENT"),t.qZA()(),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"currency"),t.qZA()(),t.TgZ(24,"div",37)(25,"div",11)(26,"div"),t._uU(27,"HEAD COUNT"),t.qZA()(),t.TgZ(28,"div"),t._uU(29),t.qZA()(),t.TgZ(30,"div",38)(31,"div",11)(32,"div"),t._uU(33,"TAIL COUNT"),t.qZA()(),t.TgZ(34,"div"),t._uU(35),t.qZA()(),t.TgZ(36,"div",39)(37,"div",11)(38,"div"),t._uU(39,"EVEN COUNT"),t.qZA()(),t.TgZ(40,"div"),t._uU(41),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(9),t.Oqu(e.config.games),t.xp6(6),t.Oqu(t.lcZ(16,6,e.payout)),t.xp6(7),t.Oqu(t.lcZ(23,8,e.config.games*e.config.bet)),t.xp6(7),t.Oqu(e.totalHeadCount),t.xp6(6),t.Oqu(e.totalTailCount),t.xp6(6),t.Oqu(e.totalEvenCount)}}const W=function(n){return["../",n]},X=function(n){return{tiles:n,name:"heads"}},j=function(n){return{tiles:n,name:"tails"}},K=[{path:"",component:(()=>{class n{constructor(e){this.gs=e,this.AppRoutes=r.$w,this._subs=[],this.gameNumber=0,this.headTiles=r.u8.slice(0,40),this.tailTiles=r.u8.slice(40,80),this.fast=!0,this.drawTime=new b.X(this.fast?500:1e3),this._results=[],this.drawn=[],this.allNumbersDrawn=new b.X(!1),this.gameFinished=!1,this.headCount=0,this.tailCount=0,this.payout=0,this.history=[],this.totalHeadCount=0,this.totalTailCount=0,this.totalEvenCount=0}getTimeInString(e){return e.toLocaleString(void 0,{minimumIntegerDigits:2})}ngOnInit(){this.sub(this.gs.setup.pipe((0,d.h)(e=>!!e),(0,c.b)(e=>{this.config=e,this.retry()})))}initVisualSubs(){this.sub(this.gs.dialogClosed.pipe((0,c.b)(()=>this.showSummary=!1)),this.gameCompletion(),this.drawNumbers())}gameCompletion(){return this.allNumbersDrawn.pipe((0,d.h)(e=>e),(0,c.b)(()=>{this.gameFinished=!0,this.gs.dialogOpened=this.gameNumber==this.config.games,this.showSummary=this.gs.dialogOpened}),(0,N.z)(()=>Z(1e3).pipe((0,y.R)((0,C.H)(r.fX).pipe((0,M.o)(()=>this.gameNumber<this.config.games),(0,c.b)(()=>{this.draw(),this.allNumbersDrawn.next(!1)}))),(0,c.b)(e=>{this.secondsTilNext=this.getTimeInString((r.fX-1e3-1e3*e)/1e3)}))))}drawNumbers(){return this.drawTime.pipe((0,c.b)(e=>console.log("Should change interval to "+e)),(0,U.w)(e=>Z(e).pipe((0,y.R)(this.allNumbersDrawn.pipe((0,d.h)(i=>i))),function G(n){return(0,E.e)((a,e)=>{let i,l,o=!1,m=!1,g=!1;const h=()=>g&&m&&(e.complete(),!0),v=()=>{g=!1,i=a.subscribe((0,A.x)(e,void 0,()=>{g=!0,!h()&&(l||(l=new S.x,n(l).subscribe((0,A.x)(e,()=>{i?v():o=!0},()=>{m=!0,h()}))),l).next()})),o&&(i.unsubscribe(),i=null,o=!1,v())};v()})}(()=>this.allNumbersDrawn.pipe((0,d.h)(i=>!1===i))))),(0,c.b)(e=>{const i=this._results.at(this.drawn.length);if(i){const o=document.getElementById("tile-"+i);o&&o.classList.add("selected-"+Math.ceil(i/10),"selected"),i<=40?this.headCount+=1:this.tailCount+=1,this.drawn.push(i)}else this.allNumbersDrawn.next(!0)}))}retry(){if(this.totalEvenCount=0,this.totalHeadCount=0,this.totalTailCount=0,this.payout=0,this.gameNumber=0,this._subs.forEach(e=>e.unsubscribe()),this.config.skipVisuals){do{this.draw()}while(this.gameNumber<this.config.games);const e=this.config.games*this.config.bet,i=this.history.sort((o,l)=>l.payout-o.payout);console.log("SKIPPED VISUALS"),console.log("SPENT: "+e),console.log("PAID: "+this.payout),console.log("OUTCOME: $"+(this.payout-e)),console.log("BEST GAME:"),console.log(i[0]),console.log("SORTED GAMES: "),console.log(i.filter(o=>o.payout>0))}else this.initVisualSubs(),this.draw()}draw(){if(this.gameNumber>=this.config.games)return;this.gameNumber+=1,this.secondsTilNext=this.getTimeInString(r.fX/1e3),this.gameFinished=!1;const e=document.getElementsByClassName("selected");Array.from(e).forEach(i=>{const o=[];i.classList.forEach(l=>{l.includes("selected")&&o.push(l)}),i.classList.remove(...o)}),this.headCount=0,this.tailCount=0,this.drawn=[],this._results=(0,r.sZ)(r.u8,r._y),this.calcResults()}calcResults(){var e,i;if(this.config.numbers){const o=this._results.reduce((h,f)=>h+(this.config.choices.includes(f)?1:0),0),l=this.horton();switch(l){case"EVENS":this.totalEvenCount+=1;break;case"HEADS":this.totalHeadCount+=1;break;case"TAILS":this.totalTailCount+=1;break;default:return}const m=(null!==(e=r.LG[this.config.numbers][o.toString()])&&void 0!==e?e:0)*(null!==(i=this.config.bet)&&void 0!==i?i:1),g={gameNo:this.gameNumber,payout:m,matches:o,hort:l,draw:this._results};console.log(`----- Game ${this.gameNumber} Result -----`),console.log(g),this.history.push(g),this.payout+=m}}horton(){const i=this._results.filter(o=>o>40);return i.length>10?"TAILS":10===i.length?"EVENS":"HEADS"}changeDrawTime(){this.fast=!this.fast,this.drawTime.next(this.fast?100:1e3)}ngOnDestroy(){this._subs.forEach(e=>e.unsubscribe())}sub(...e){e.forEach(i=>{(0,L.b)(i)?this._subs.push(i.subscribe()):(0,P.Nn)(e)&&this._subs.push(i)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game"]],decls:44,vars:17,consts:[["id","game-container"],["id","header"],["cols","22","rowHeight","1:1","gutterSize","4",1,"mb-4"],["colspan","1",1,"spacer-tile","tile"],["id","back-title","colspan","2",1,"text-tile"],["id","run-title","colspan","2",1,"text-tile"],["colspan","4",1,"spacer-tile","tile"],["id","heads-title","colspan","2",1,"text-tile"],["id","tails-title","colspan","2",1,"text-tile"],["rowspan","2","colspan","4",1,"tile","big-tile"],["id","current-game-number"],[1,"big-tile-header"],[4,"ngIf","ngIfElse"],["faster",""],["colspan","2",1,"tile","selected-5","clickable",3,"routerLink"],["colspan","2",1,"tile","selected-6","clickable",3,"click"],["colspan","2",1,"tile","heads-tile"],["colspan","2",1,"tile","tails-tile"],["id","board"],["id","head-section"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","tail-section"],["tileTemplate",""],["id","game-summary",4,"ngIf"],["allFinished",""],["id","time-until-next"],["rowspan","2","colspan","4",1,"tile","big-tile","clickable",3,"click"],["id","all-games-finished"],["id","fast-forward"],[3,"ngClass"],["rowspan","4","colspan","1"],["class","tile","fxLayoutAlign","center center","colspan","2",3,"id",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","colspan","2",1,"tile",3,"id"],["id","game-summary"],["fxLayout","column"],["id","games-played","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","payout","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","head-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","tail-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"],["id","even-count-summary","fxLayoutAlign","center center","fxLayout","column","fxLayoutGap","4px",1,"big-tile"]],template:function(e,i){if(1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"mat-grid-list",2),t._UZ(3,"mat-grid-tile",3),t.TgZ(4,"mat-grid-tile",4),t._uU(5,"Setup"),t.qZA(),t.TgZ(6,"mat-grid-tile",5),t._uU(7,"Again"),t.qZA(),t._UZ(8,"mat-grid-tile",6),t.TgZ(9,"mat-grid-tile",7),t._uU(10,"Heads"),t.qZA(),t.TgZ(11,"mat-grid-tile",8),t._uU(12,"Tails"),t.qZA(),t.TgZ(13,"mat-grid-tile",9)(14,"div",10)(15,"div",11)(16,"div"),t._uU(17,"GAME"),t.qZA()(),t.TgZ(18,"div"),t._uU(19),t.qZA()()(),t.YNc(20,k,4,2,"ng-container",12),t.YNc(21,J,7,4,"ng-template",null,13,t.W1O),t._UZ(23,"mat-grid-tile",3)(24,"mat-grid-tile",3),t.TgZ(25,"mat-grid-tile",14)(26,"mat-icon"),t._uU(27,"chevron_left"),t.qZA()(),t.TgZ(28,"mat-grid-tile",15),t.NdJ("click",function(){return i.retry()}),t.TgZ(29,"mat-icon"),t._uU(30,"refresh"),t.qZA()(),t._UZ(31,"mat-grid-tile",6),t.TgZ(32,"mat-grid-tile",16),t._uU(33),t.qZA(),t.TgZ(34,"mat-grid-tile",17),t._uU(35),t.qZA()()(),t.TgZ(36,"div",18)(37,"div",19),t.YNc(38,Q,1,0,"ng-container",20),t.qZA(),t.TgZ(39,"div",21),t.YNc(40,Y,1,0,"ng-container",20),t.qZA()()(),t.YNc(41,z,6,7,"ng-template",null,22,t.W1O),t.YNc(43,B,42,10,"section",23)),2&e){const o=t.MAs(22),l=t.MAs(42);t.xp6(19),t.Oqu(i.gameNumber),t.xp6(1),t.Q6J("ngIf",i.gameFinished)("ngIfElse",o),t.xp6(5),t.Q6J("routerLink",t.VKq(11,W,i.AppRoutes.SETUP)),t.xp6(8),t.Oqu(i.headCount),t.xp6(2),t.Oqu(i.tailCount),t.xp6(3),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(13,X,i.headTiles)),t.xp6(2),t.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",t.VKq(15,j,i.tailTiles)),t.xp6(3),t.Q6J("ngIf",i.gameNumber==i.config.games&&i.gameFinished&&i.showSummary)}},directives:[O.Il,O.DX,u.O5,I.Hw,u.mk,D.oO,T.rH,u.tP,u.sg,p.Wh,p.xw,p.SQ],pipes:[u.H9,u.rS],styles:["[_ngcontent-%COMP%]:root{--tile-width: 8.5vw;--tile-gap: 4px;--tile-height: 5vw}#game-container[_ngcontent-%COMP%]{padding:4px;-webkit-user-select:none;user-select:none}#header[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]   .big-tile[_ngcontent-%COMP%]{color:#fff}.text-tile[_ngcontent-%COMP%]{font-size:2vw}.tile[_ngcontent-%COMP%]{text-align:center;border-radius:.25em;background:#d8e4eb;font-size:3vw;color:#0000}.selected[_ngcontent-%COMP%]{color:#fff}.tails[_ngcontent-%COMP%]{margin-top:1em}.big-tile[_ngcontent-%COMP%]{font-size:3vw;background-color:var(--big-tile)}.big-tile[_ngcontent-%COMP%]   .big-tile-header[_ngcontent-%COMP%]{font-size:2vw;margin-bottom:.5vw}.heads-tile[_ngcontent-%COMP%]{background-color:var(--heads)}.tails-tile[_ngcontent-%COMP%]{background-color:var(--tails)}#back-title[_ngcontent-%COMP%]{color:var(--row5)}#run-title[_ngcontent-%COMP%]{color:var(--row6)}#heads-title[_ngcontent-%COMP%]{color:var(--heads)}#tails-title[_ngcontent-%COMP%]{color:var(--tails)}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}#game-summary[_ngcontent-%COMP%]{left:0;right:0;top:0;bottom:0;width:50vw;height:80vh;background:#d8e4eb;border-radius:1em;z-index:1000;position:absolute;margin:auto;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}.spacer-label[_ngcontent-%COMP%]{height:100%}.board-label[_ngcontent-%COMP%]{border-radius:.25em;color:#fff}.board-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(-90deg);font-size:2vw}.spacer-tile[_ngcontent-%COMP%]{visibility:hidden}"]}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[_.m,T.Bz.forChild(K)]]}),n})()}}]);